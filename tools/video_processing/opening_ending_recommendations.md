# 开头和结尾视频选择建议

## 核心原则
**优先使用原版视频，避免AI生成**，保证质量和一致性。

## 开头视频建议

### 理想的视觉效果
1. **标题画面**
   - 原版视频中带有标题的场景
   - 清晰的画面，适合叠加文字
   - 时长：3-5秒

2. **全景/远景场景**
   - 仙域全景
   - 星空、云海
   - 山川河流的远景
   - 给人"开始"、"展开"的感觉

3. **平静、优雅的场景**
   - 空镜头
   - 慢动作场景
   - 光线柔和的场景

### 推荐检索关键词
```
- "标题画面"
- "全景"
- "远景"
- "星空"
- "云海"
- "仙域"
- "淡入"
- "开始"
- "欢迎"
- "标题展示"
- "片头"
```

### 从原版视频中选择建议
- 选择各集开头的**前几个场景**（通常在剧集开始时的标题画面）
- 查找**Scene-001, Scene-002**等开头场景
- 查找描述中包含"标题"、"片头"的场景

## 结尾视频建议

### 理想的视觉效果
1. **淡出场景**
   - 画面逐渐变暗
   - 角色远去的背影
   - 空镜头结束

2. **总结性画面**
   - 平静的场景
   - 光线下落/日落
   - 画面静止的最后一刻

3. **下集预告相关**
   - 悬念性的场景
   - 但不要太激烈（避免喧宾夺主）

### 推荐检索关键词
```
- "淡出"
- "结束"
- "日落"
- "远去"
- "背影"
- "结尾"
- "片尾"
- "告别"
- "再见"
- "夜幕"
- "平静"
```

### 从原版视频中选择建议
- 选择各集结尾的**最后几个场景**（通常在剧集结束时的淡出画面）
- 查找**最后几个Scene**（如Scene-200, Scene-201等）
- 查找描述中包含"结束"、"淡出"的场景

## 实施方案

### 方案1：从已有场景中检索（推荐）
1. 使用 `search_scenes.py` 检索合适的开头和结尾场景
2. 优先选择：
   - 开头：各集的Scene-001到Scene-010
   - 结尾：各集的最后5-10个场景
3. 从检索结果中选择最佳匹配

### 方案2：手动指定固定场景
1. 选择1-2个通用的开头场景（可复用）
2. 选择1-2个通用的结尾场景（可复用）
3. 在所有集数中使用相同的开头和结尾

### 方案3：每集独立选择
1. 根据本集内容，选择相关的开头场景
2. 根据本集结尾，选择相关的结尾场景
3. 更加个性化，但需要更多工作

## 具体操作步骤

### 步骤1：检索开头场景
```bash
python3 tools/video_processing/search_scenes.py \
    --query "标题画面 全景 星空 片头" \
    --index processed/global_index.faiss \
    --metadata processed/index_metadata.json \
    --scenes processed/episode_*/scene_metadata.json \
    --top-k 10 \
    --method hybrid
```

### 步骤2：检索结尾场景
```bash
python3 tools/video_processing/search_scenes.py \
    --query "淡出 结束 日落 片尾 再见" \
    --index processed/global_index.faiss \
    --metadata processed/index_metadata.json \
    --scenes processed/episode_*/scene_metadata.json \
    --top-k 10 \
    --method hybrid
```

### 步骤3：手动选择最佳场景
从检索结果中：
- 查看场景描述
- 查看视频预览
- 选择最符合语境的场景

### 步骤4：在narration工作流中使用
在narration JSON文件中，将开头和结尾的场景ID指定为检索到的场景：
```json
{
  "opening": {
    "scene_id": "171_scene_001",
    "narration": "我是云卷仙音，欢迎回来。第171集：..."
  },
  "ending": {
    "scene_id": "170_scene_215",
    "narration": "下一集再见。我是云卷仙音，原著作者忘语。"
  }
}
```

## 最佳实践

1. **固定开头和结尾**（推荐）
   - 选择1个通用的开头场景，所有集数复用
   - 选择1个通用的结尾场景，所有集数复用
   - 好处：统一风格，减少工作量

2. **时长控制**
   - 开头：3-5秒（配合旁白）
   - 结尾：3-5秒（配合旁白）
   - 可根据旁白时长调整

3. **质量要求**
   - 画面清晰
   - 无遮挡字幕
   - 光线适中
   - 动作缓慢（适合叠加文字）

4. **备用方案**
   - 如果找不到合适的原版视频，再考虑AI生成
   - 但优先使用检索到的场景
