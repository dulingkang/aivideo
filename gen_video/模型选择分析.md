# 模型选择分析：HunyuanVideo vs CogVideoX-5B

## 当前情况

### 已集成：HunyuanVideo 1.5
- ✅ 已完全集成并优化
- ✅ 支持480p和720p模型
- ✅ 显存优化完成（CPU offload, attention slicing等）
- ✅ 风格配置系统已支持

### 待集成：CogVideoX-5B
- ⏳ diffusers中已有支持（CogVideoXImageToVideoPipeline）
- ⏳ 需要集成到video_generator.py
- ⏳ 需要配置和测试

---

## 对比分析

### HunyuanVideo 1.5

**优势**：
- ✅ **质量最高**：画质最好，动画连续性强
- ✅ **已集成完成**：代码已优化，可直接使用
- ✅ **支持长视频**：可生成>5秒原生视频
- ✅ **显存优化完成**：已实现多种优化策略

**劣势**：
- ❌ **显存需求大**：即使480p模型也需要20GB+显存
- ❌ **速度较慢**：生成时间较长（30步约21分钟）
- ❌ **成本较高**：需要高端GPU或GPU云

**适用场景**：
- 科普视频（政府/教育赛道）✅
- 高端宣传片 ✅
- 企业视频 ✅
- 需要电影级质量的场景 ✅

---

### CogVideoX-5B

**优势**：
- ✅ **显存需求低**：24G显卡可跑
- ✅ **速度快**：生成速度比HunyuanVideo快
- ✅ **成本低**：可在消费级GPU上运行
- ✅ **批量生成**：适合大量生成场景
- ✅ **中文语义理解强**：国产模型优势

**劣势**：
- ❌ **质量略低**：画质不如HunyuanVideo
- ❌ **需要集成**：需要开发集成代码
- ❌ **测试验证**：需要测试和优化

**适用场景**：
- 短剧/小说推文（批量生成）✅
- 电商产品广告（快速生成）✅
- 日常I2V（大量生成）✅
- 成本敏感场景 ✅

---

## 决策建议

### 方案1：只用HunyuanVideo（推荐用于科普赛道）

**适用情况**：
- ✅ 主要做科普视频（政府/教育赛道）
- ✅ 对质量要求高
- ✅ 显存充足（90GB+）
- ✅ 不需要批量生成

**优点**：
- 无需额外开发
- 质量最高
- 代码已优化完成

**缺点**：
- 无法支持批量生成
- 成本较高

---

### 方案2：集成CogVideoX-5B（推荐用于批量生成）

**适用情况**：
- ✅ 需要批量生成（短剧推文每天几千条）
- ✅ 成本敏感
- ✅ 需要快速生成
- ✅ 显存有限（24G-40G）

**优点**：
- 支持批量生成
- 成本更低
- 速度更快

**缺点**：
- 需要开发集成（约1-2天）
- 质量略低于HunyuanVideo

---

### 方案3：双模型策略（最佳方案）

**策略**：
- **高端场景**（科普、政府、企业）→ 使用HunyuanVideo
- **批量场景**（短剧、推文、电商）→ 使用CogVideoX-5B

**实现方式**：
- 在配置中设置默认模型
- 在API中支持模型选择参数
- 根据场景类型自动选择模型

**配置示例**：
```yaml
video:
  model_type: auto  # 自动选择
  # 或
  model_type: hunyuanvideo  # 强制使用HunyuanVideo
  # 或
  model_type: cogvideox  # 强制使用CogVideoX
```

**API调用**：
```json
{
  "scenes": [...],
  "model_type": "cogvideox"  // 可选：hunyuanvideo, cogvideox, auto
}
```

---

## 我的建议

### 如果主要做科普视频（当前方向）

**建议：先用HunyuanVideo，暂不集成CogVideoX**

**理由**：
1. ✅ 科普视频对质量要求高，HunyuanVideo更适合
2. ✅ 不需要批量生成，HunyuanVideo已足够
3. ✅ 代码已优化完成，可直接使用
4. ✅ 避免额外开发成本

**何时需要CogVideoX**：
- 当需要批量生成短剧推文时
- 当需要降低成本时
- 当需要快速生成时

---

### 如果要扩展到批量生成

**建议：集成CogVideoX-5B**

**理由**：
1. ✅ 短剧推文需要批量生成（每天几千条）
2. ✅ CogVideoX成本更低，速度更快
3. ✅ 可以在24G显卡上运行
4. ✅ diffusers已有支持，集成相对简单

**集成工作量**：
- 约1-2天开发时间
- 需要测试和优化

---

## 集成CogVideoX的工作量评估

如果决定集成，需要：

1. **代码集成**（约4-6小时）
   - 添加`_load_cogvideox_model()`方法
   - 添加`_generate_video_cogvideox()`方法
   - 修改`load_model()`和`generate_video()`支持模型选择

2. **配置添加**（约1小时）
   - 在config.yaml中添加cogvideox配置
   - 添加模型选择逻辑

3. **测试验证**（约2-4小时）
   - 测试CogVideoX生成
   - 测试模型切换
   - 性能对比测试

**总计**：约1-2天

---

## 最终建议

根据你的商业化方案：

### 阶段1（当前）：只用HunyuanVideo
- ✅ 专注科普视频（政府/教育赛道）
- ✅ 使用HunyuanVideo获得最高质量
- ✅ 无需额外开发

### 阶段2（扩展时）：集成CogVideoX
- 🔄 扩展到短剧推文批量生成
- 🔄 扩展到电商产品广告
- 🔄 需要批量生成时再集成

### 阶段3（优化）：双模型自动选择
- 🔄 根据场景类型自动选择模型
- 🔄 高端场景用HunyuanVideo，批量场景用CogVideoX

---

## 结论

**当前建议：先用HunyuanVideo，暂不集成CogVideoX**

**原因**：
1. 科普视频对质量要求高，HunyuanVideo更适合
2. 不需要批量生成，HunyuanVideo已足够
3. 代码已优化完成，可直接使用
4. 避免额外开发成本

**何时集成CogVideoX**：
- 当需要批量生成短剧推文时
- 当需要降低成本时
- 当需要快速生成时

**集成难度**：中等（约1-2天）

---

## 快速决策

**回答以下问题**：

1. **主要业务场景是什么？**
   - 科普视频 → 只用HunyuanVideo ✅
   - 短剧推文 → 需要CogVideoX ⚠️
   - 电商广告 → 需要CogVideoX ⚠️

2. **是否需要批量生成？**
   - 否 → 只用HunyuanVideo ✅
   - 是 → 需要CogVideoX ⚠️

3. **显存是否充足？**
   - 是（90GB+）→ 只用HunyuanVideo ✅
   - 否（24G-40G）→ 需要CogVideoX ⚠️

**如果3个问题都是"只用HunyuanVideo"，则暂不集成CogVideoX。**

