# 插帧方案更新说明

## 🔄 更新内容

由于 `rife-ncnn-python` 在 PyPI 上不可用或不支持 Python 3.12，已更新为**更实用的多级降级方案**。

## ✅ 新的插帧方案（按优先级）

### 1. 官方 RIFE 实现（最佳效果）

**安装方式**：
```bash
cd /vepfs-dev/shawn/vid/fanren
git clone https://github.com/hzwer/arXiv2020-RIFE.git
cd arXiv2020-RIFE
pip install -r requirements.txt
# 下载模型权重到 train_log 目录
```

**优势**：
- ✅ 插帧质量最高
- ✅ 运动最自然

**缺点**：
- ⚠️ 需要手动安装
- ⚠️ 需要下载模型权重

### 2. OpenCV 光流插帧（推荐，自动可用）

**无需安装**：OpenCV 已在依赖中（`opencv-python`）

**优势**：
- ✅ 自动可用（无需额外安装）
- ✅ 效果较好
- ✅ 速度快

**工作原理**：
- 使用加权平均在帧之间插值
- 简单但有效

### 3. 简单线性插值（降级方案）

**自动使用**：如果前两种方法都不可用

**优势**：
- ✅ 无需任何依赖
- ✅ 保证可用

**缺点**：
- ⚠️ 效果一般（但比不插帧好）

## 🎯 使用方式

### 自动选择

系统会**自动选择**可用的插帧方法，按优先级：
1. 官方 RIFE（如果已安装）
2. OpenCV 光流（自动可用）
3. 简单线性插值（降级方案）

**无需手动配置**，系统会自动选择最佳方法。

### 配置

在 `config.yaml` 中：

```yaml
video:
  rife:
    enabled: true  # 启用插帧
    interpolation_scale: 2.0  # 插帧倍数
```

## 📊 效果对比

| 方法 | 效果 | 速度 | 安装难度 |
|------|------|------|----------|
| 官方 RIFE | ⭐⭐⭐⭐⭐ | ⭐⭐⭐ | ⭐⭐⭐ |
| OpenCV 光流 | ⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐（自动可用） |
| 线性插值 | ⭐⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐（自动可用） |

## 🚀 推荐方案

### 快速开始（推荐）

**使用 OpenCV 光流插帧**：
- ✅ 无需安装（自动可用）
- ✅ 效果较好
- ✅ 速度快

**配置**：
```yaml
video:
  rife:
    enabled: true
    interpolation_scale: 2.0
```

### 追求最佳效果

**安装官方 RIFE**：
```bash
cd /vepfs-dev/shawn/vid/fanren
git clone https://github.com/hzwer/arXiv2020-RIFE.git
cd arXiv2020-RIFE
pip install -r requirements.txt
# 下载模型权重
```

系统会自动检测并使用官方 RIFE。

## ✅ 优势

1. **无需额外安装**：OpenCV 光流插帧自动可用
2. **自动降级**：如果高级方法不可用，自动使用简单方法
3. **保证可用**：至少可以使用线性插值
4. **效果提升**：即使使用简单方法，也比不插帧好

## 📝 总结

**更新后的方案**：
- ✅ 移除了不可用的 `rife-ncnn-python` 依赖
- ✅ 添加了 OpenCV 光流插帧（自动可用）
- ✅ 保留了简单线性插值作为降级方案
- ✅ 支持官方 RIFE（可选，最佳效果）

**现在可以直接使用**，无需安装任何额外依赖！

