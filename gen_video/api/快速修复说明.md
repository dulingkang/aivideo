# 快速修复说明

## 问题
API 返回 500 错误，可能是 ModelManager 初始化或模型加载失败。

## 解决方案

### 1. 检查错误日志
查看 API 服务的控制台输出，找到具体的错误信息。

### 2. 临时禁用 ModelManager（如果不需要）
如果暂时不需要使用 ModelManager，可以：
- 在前端不勾选"使用 ModelManager"
- 或者设置 `use_model_manager=false`

### 3. 检查模型路径
确保所有模型文件都在正确的位置：
```bash
ls -lh /vepfs-dev/shawn/vid/fanren/gen_video/models/
```

### 4. 测试 ModelManager 是否可用
```bash
cd /vepfs-dev/shawn/vid/fanren/gen_video
source /vepfs-dev/shawn/venv/py312/bin/activate
python -c "from model_manager import ModelManager; m = ModelManager(); print('✅ ModelManager 可用')"
```

### 5. 如果 ModelManager 不可用
API 会自动回退到原有的 ImageGenerator 系统，应该仍然可以正常工作。

## 调试步骤

1. **查看 API 日志**：检查控制台输出的错误信息
2. **测试健康检查**：`curl http://localhost:8000/api/v1/health`
3. **测试简单请求**：不使用 ModelManager 的请求应该可以工作
4. **检查依赖**：确保所有依赖都已安装

## 常见错误

### 错误 1: ModelManager 导入失败
```
ModuleNotFoundError: No module named 'model_manager'
```
**解决**：确保在正确的目录运行，或检查 Python 路径

### 错误 2: 模型路径不存在
```
RuntimeError: 模型路径不存在: /path/to/model
```
**解决**：检查模型是否已下载，路径是否正确

### 错误 3: 显存不足
```
CUDA out of memory
```
**解决**：使用 `lazy_load=True`，或卸载其他模型

