# RIFE å’Œ ComfyUI AnimateDiff å®‰è£…å®Œæˆæ€»ç»“

## âœ… å®‰è£…å®ŒæˆçŠ¶æ€

### 1. RIFE å®˜æ–¹å®ç°
- âœ… **ä»“åº“å·²å…‹éš†**ï¼š`/vepfs-dev/shawn/vid/fanren/RIFE`
- âœ… **ä¾èµ–å·²å®‰è£…**ï¼šä¿®å¤äº† numpy ç‰ˆæœ¬é™åˆ¶ï¼Œæ”¯æŒ Python 3.12
- âœ… **æ¨¡å‹æƒé‡å·²ä¸‹è½½**ï¼š`RIFE/train_log/train_log/flownet.pkl` (12MB)
- âœ… **ä»£ç å·²é›†æˆ**ï¼š`video_generator.py` å·²æ”¯æŒ RIFE
- âœ… **æµ‹è¯•é€šè¿‡**ï¼šRIFE v3 HD æ¨¡å‹å¯ä»¥æˆåŠŸåŠ è½½

### 2. ComfyUI
- âœ… **ä»“åº“å·²å…‹éš†**ï¼š`/vepfs-dev/shawn/vid/fanren/ComfyUI`
- âœ… **ä¾èµ–å·²å®‰è£…**ï¼šæ‰€æœ‰ä¾èµ–åŒ…å·²å®‰è£…å®Œæˆ

### 3. ComfyUI-AnimateDiff-Evolved
- âœ… **æ’ä»¶å·²å…‹éš†**ï¼š`ComfyUI/custom_nodes/ComfyUI-AnimateDiff-Evolved`
- âœ… **AnimateDiff æ¨¡å‹å·²ä¸‹è½½**ï¼š`ComfyUI/models/animatediff_models/` (1.8GB)

## ğŸ¯ ä½¿ç”¨æ–¹æ³•

### RIFE æ’å¸§ï¼ˆè‡ªåŠ¨ä½¿ç”¨ï¼‰

ç³»ç»Ÿä¼šè‡ªåŠ¨æ£€æµ‹å¹¶ä½¿ç”¨ RIFE å®˜æ–¹å®ç°ï¼Œæ— éœ€é¢å¤–é…ç½®ã€‚

**éªŒè¯æ–¹æ³•**ï¼šè¿è¡Œè§†é¢‘ç”Ÿæˆæ—¶ï¼Œåº”è¯¥çœ‹åˆ°ï¼š
```
âœ“ RIFE æ¨¡å‹åŠ è½½æˆåŠŸï¼ˆä½¿ç”¨å®˜æ–¹å®ç° v3 HDï¼‰
âœ“ æ’å¸§å®Œæˆ: 60 å¸§ â†’ 120 å¸§
```

**é…ç½®**ï¼ˆ`config.yaml`ï¼‰ï¼š
```yaml
video:
  rife:
    enabled: true  # å¯ç”¨æ’å¸§
    interpolation_scale: 2.0  # æ’å¸§å€æ•°
```

### ComfyUI AnimateDiffï¼ˆéœ€è¦å¯åŠ¨æœåŠ¡å™¨ï¼‰

#### å¯åŠ¨æœåŠ¡å™¨

```bash
# æ–¹æ³•1ï¼šç›´æ¥è¿è¡Œ
cd /vepfs-dev/shawn/vid/fanren/ComfyUI
source /vepfs-dev/shawn/venv/py312/bin/activate
python main.py --port 8188

# æ–¹æ³•2ï¼šä½¿ç”¨è„šæœ¬
bash gen_video/å¯åŠ¨ComfyUIæœåŠ¡å™¨.sh

# æ–¹æ³•3ï¼šåå°è¿è¡Œ
cd /vepfs-dev/shawn/vid/fanren/ComfyUI
source /vepfs-dev/shawn/venv/py312/bin/activate
nohup python main.py --port 8188 > comfyui.log 2>&1 &
```

#### éªŒè¯è¿æ¥

```bash
curl http://127.0.0.1:8188/system_stats
```

## ğŸ“Š æ•ˆæœå¯¹æ¯”

| æ’å¸§æ–¹æ³• | æ•ˆæœ | é€Ÿåº¦ | çŠ¶æ€ |
|---------|------|------|------|
| **RIFE å®˜æ–¹ v3 HD** | â­â­â­â­â­ | â­â­â­ | âœ… å·²å®‰è£…å¹¶å¯ç”¨ |
| OpenCV å…‰æµ | â­â­â­â­ | â­â­â­â­â­ | âœ… é™çº§æ–¹æ¡ˆ |
| çº¿æ€§æ’å€¼ | â­â­â­ | â­â­â­â­â­ | âœ… é™çº§æ–¹æ¡ˆ |

## ğŸš€ æµ‹è¯•

### æµ‹è¯• RIFE æ’å¸§

```bash
cd /vepfs-dev/shawn/vid/fanren
source /vepfs-dev/shawn/venv/py312/bin/activate
python gen_video/test_full_pipeline_optimized.py --script lingjie/1.json --max-scenes 1
```

**é¢„æœŸè¾“å‡º**ï¼š
```
âœ“ RIFE æ¨¡å‹åŠ è½½æˆåŠŸï¼ˆä½¿ç”¨å®˜æ–¹å®ç° v3 HDï¼‰
â„¹ å¼€å§‹æ’å¸§: 60 å¸§ â†’ 120 å¸§ (å€æ•°: 2.00x)
âœ“ æ’å¸§å®Œæˆ: 60 å¸§ â†’ 120 å¸§
```

### æµ‹è¯• ComfyUIï¼ˆå¯é€‰ï¼‰

```bash
# 1. å¯åŠ¨æœåŠ¡å™¨
cd /vepfs-dev/shawn/vid/fanren/ComfyUI
source /vepfs-dev/shawn/venv/py312/bin/activate
python main.py --port 8188

# 2. åœ¨å¦ä¸€ä¸ªç»ˆç«¯æµ‹è¯•è¿æ¥
python -c "from gen_video.comfyui_integration import test_comfyui_connection; print('è¿æ¥æˆåŠŸ' if test_comfyui_connection() else 'è¿æ¥å¤±è´¥')"
```

## ğŸ“ æ–‡ä»¶ç»“æ„

```
/vepfs-dev/shawn/vid/fanren/
â”œâ”€â”€ RIFE/                          # âœ… RIFE å®˜æ–¹å®ç°
â”‚   â”œâ”€â”€ model/                     # æ¨¡å‹å®šä¹‰
â”‚   â”œâ”€â”€ train_log/
â”‚   â”‚   â””â”€â”€ train_log/             # æ¨¡å‹æƒé‡ï¼ˆå·²ä¸‹è½½ï¼‰
â”‚   â”‚       â”œâ”€â”€ flownet.pkl       # 12MB
â”‚   â”‚       â””â”€â”€ RIFE_HDv3.py       # æ¨¡å‹å®šä¹‰
â”‚   â””â”€â”€ inference_video.py
â”œâ”€â”€ ComfyUI/                       # âœ… ComfyUI
â”‚   â”œâ”€â”€ custom_nodes/
â”‚   â”‚   â””â”€â”€ ComfyUI-AnimateDiff-Evolved/  # âœ… AnimateDiff æ’ä»¶
â”‚   â””â”€â”€ models/
â”‚       â””â”€â”€ animatediff_models/     # âœ… AnimateDiff æ¨¡å‹ï¼ˆ1.8GBï¼‰
â””â”€â”€ gen_video/
    â”œâ”€â”€ video_generator.py         # âœ… å·²é›†æˆ RIFE
    â”œâ”€â”€ comfyui_integration.py     # âœ… ComfyUI API é›†æˆ
    â””â”€â”€ å¯åŠ¨ComfyUIæœåŠ¡å™¨.sh        # âœ… å¯åŠ¨è„šæœ¬
```

## âœ… æ€»ç»“

**RIFE æ’å¸§**ï¼š
- âœ… å·²å®‰è£…å¹¶é›†æˆ
- âœ… è‡ªåŠ¨æ£€æµ‹å’Œä½¿ç”¨
- âœ… æµ‹è¯•é€šè¿‡ï¼Œå¯ä»¥æ­£å¸¸ä½¿ç”¨

**ComfyUI AnimateDiff**ï¼š
- âœ… å·²å®‰è£…
- âœ… æ¨¡å‹å·²ä¸‹è½½
- âš ï¸ éœ€è¦å¯åŠ¨æœåŠ¡å™¨æ‰èƒ½ä½¿ç”¨ï¼ˆå¯é€‰ï¼‰

**ç°åœ¨å¯ä»¥ç›´æ¥ä½¿ç”¨ RIFE æ’å¸§äº†ï¼ç³»ç»Ÿä¼šè‡ªåŠ¨ä½¿ç”¨ RIFE å®˜æ–¹å®ç°ï¼Œæ•ˆæœæœ€ä½³ã€‚**

