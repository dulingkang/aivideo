# æµ‹è¯•å¯åŠ¨æŒ‡å—

## âœ… æ‰€æœ‰æ¨¡å‹å·²å°±ç»ª

| æ¨¡å‹ | çŠ¶æ€ | å¤§å° |
|------|------|------|
| Flux.1 | âœ… å®Œæ•´ | 53.91 GB |
| Flux.2 | âœ… å®Œæ•´ | 53.87 GB |
| Kolors-base | âœ… å®Œæ•´ | 26.99 GB |
| Hunyuan-DiT | âœ… å®Œæ•´ | 26.71 GB |
| SD3.5 Large Turbo | âœ… å®Œæ•´ | 40.81 GB |

## ğŸš€ å¯åŠ¨æ­¥éª¤

### 1. å¯åŠ¨ API æœåŠ¡

```bash
cd /vepfs-dev/shawn/vid/fanren/gen_video
source /vepfs-dev/shawn/venv/py312/bin/activate

# å¯åŠ¨ API
python api/mvp_main.py
# æˆ–
uvicorn api.mvp_main:app --host 0.0.0.0 --port 8000 --reload
```

### 2. å¯åŠ¨å‰ç«¯ï¼ˆå¯é€‰ï¼‰

```bash
cd gen_video/api/web_ui_vue
npm run dev
```

### 3. æµ‹è¯• API

#### æ–¹å¼ 1: ä½¿ç”¨ curl

```bash
# æµ‹è¯• ModelManagerï¼ˆç§‘æ™®ä¸»æŒäººè„¸ï¼‰
curl -X POST "http://localhost:8000/api/v1/images/generate" \
  -H "X-API-Key: test-key-123" \
  -F "prompt=ä¸€ä½æ¸©æš–äº²å’Œçš„ä¸­å›½ç§‘æ™®ä¸»æŒäººï¼Œæ­£é¢å¯¹é•œå¤´" \
  -F "task=host_face" \
  -F "use_model_manager=true" \
  -F "width=1024" \
  -F "height=1024"
```

#### æ–¹å¼ 2: ä½¿ç”¨ Python è„šæœ¬

```bash
python api/test_api_with_model_manager.py
```

#### æ–¹å¼ 3: ä½¿ç”¨å‰ç«¯ç•Œé¢

1. æ‰“å¼€æµè§ˆå™¨è®¿é—®å‰ç«¯åœ°å€
2. é€‰æ‹©"ä½¿ç”¨ ModelManager"
3. é€‰æ‹©ä»»åŠ¡ç±»å‹æˆ–ç•™ç©ºï¼ˆè‡ªåŠ¨é€‰æ‹©ï¼‰
4. è¾“å…¥æç¤ºè¯
5. ç‚¹å‡»ç”Ÿæˆ

## ğŸ“‹ æµ‹è¯•ç”¨ä¾‹

### æµ‹è¯• 1: ç§‘æ™®ä¸»æŒäººè„¸ï¼ˆKolorsï¼‰

```bash
curl -X POST "http://localhost:8000/api/v1/images/generate" \
  -H "X-API-Key: test-key-123" \
  -F "prompt=ç§‘æ™®ç”·ä¸»æŒäººï¼Œä¸“ä¸šå½¢è±¡ï¼Œå¾®ç¬‘" \
  -F "task=host_face" \
  -F "use_model_manager=true"
```

### æµ‹è¯• 2: ç§‘å­¦èƒŒæ™¯ï¼ˆFlux.2ï¼‰

```bash
curl -X POST "http://localhost:8000/api/v1/images/generate" \
  -H "X-API-Key: test-key-123" \
  -F "prompt=é‡å­è®¡ç®—æœºæ ¸å¿ƒï¼Œè“è‰²å…‰æ™•ï¼Œé«˜ç§‘æŠ€" \
  -F "task=science_background" \
  -F "use_model_manager=true"
```

### æµ‹è¯• 3: å®éªŒå®¤åœºæ™¯ï¼ˆFlux.1ï¼‰

```bash
curl -X POST "http://localhost:8000/api/v1/images/generate" \
  -H "X-API-Key: test-key-123" \
  -F "prompt=å®éªŒå®¤å†…éƒ¨ï¼Œç§‘å­¦å®¶åœ¨åšå®éªŒ" \
  -F "task=lab_scene" \
  -F "use_model_manager=true"
```

### æµ‹è¯• 4: å®˜æ–¹é£æ ¼ï¼ˆHunyuan-DiTï¼‰

```bash
curl -X POST "http://localhost:8000/api/v1/images/generate" \
  -H "X-API-Key: test-key-123" \
  -F "prompt=ä¸­å›½ç©ºé—´ç«™ï¼Œèˆªå¤©å‘˜æ“ä½œç§‘å­¦å®éªŒ" \
  -F "task=official_style" \
  -F "use_model_manager=true"
```

### æµ‹è¯• 5: å¿«é€ŸèƒŒæ™¯ï¼ˆSD3 Turboï¼‰

```bash
curl -X POST "http://localhost:8000/api/v1/images/generate" \
  -H "X-API-Key: test-key-123" \
  -F "prompt=æ•™å®¤é‡Œçš„å­©å­ä»¬åœ¨ä¸Šç§‘å­¦è¯¾" \
  -F "task=fast_background" \
  -F "use_model_manager=true"
```

## ğŸ” æ£€æŸ¥ API çŠ¶æ€

```bash
# å¥åº·æ£€æŸ¥
curl http://localhost:8000/api/v1/health

# æ¨¡å‹çŠ¶æ€ï¼ˆå¦‚æœæ”¯æŒï¼‰
curl -H "X-API-Key: test-key-123" http://localhost:8000/api/v1/models/status
```

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **é¦–æ¬¡åŠ è½½**: æ¯ä¸ªæ¨¡å‹é¦–æ¬¡ä½¿ç”¨æ—¶éœ€è¦åŠ è½½ï¼Œå¯èƒ½éœ€è¦ä¸€äº›æ—¶é—´
2. **æ˜¾å­˜**: ç¡®ä¿ GPU æ˜¾å­˜è¶³å¤Ÿï¼ˆæ¨è 32GB+ï¼‰
3. **Hunyuan-DiT**: éœ€è¦å®‰è£…å®˜æ–¹ä¾èµ–ï¼Œå¯èƒ½éœ€è¦ç‹¬ç«‹ç¯å¢ƒ
4. **è¶…æ—¶**: å›¾åƒç”Ÿæˆå¯èƒ½éœ€è¦ 30-120 ç§’ï¼Œè¯·è®¾ç½®åˆé€‚çš„è¶…æ—¶æ—¶é—´

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [å¤šæ¨¡å‹åè°ƒç³»ç»Ÿä½¿ç”¨æŒ‡å—](./å¤šæ¨¡å‹åè°ƒç³»ç»Ÿä½¿ç”¨æŒ‡å—.md)
- [å‰ç«¯é›†æˆ ModelManager æŒ‡å—](./å‰ç«¯é›†æˆModelManageræŒ‡å—.md)
- [æ¨¡å‹ä¸‹è½½å®ŒæˆæŠ¥å‘Š](./æ¨¡å‹ä¸‹è½½å®ŒæˆæŠ¥å‘Š.md)

