# 国家科普短视频 - 实施路线图

## 🎯 目标
在2周内完成核心能力建设，能够稳定生成"科普哥哥"/"未来姐姐"IP的科普短视频，单条视频生成时间控制在2小时内。

---

## 📅 第一周：核心能力建设

### Day 1-2: 科普IP人物创建

#### 任务清单
- [ ] **准备IP人物参考图**
  - 科普哥哥：10-20张参考图
    - 正面照（微笑、专注、讲解表情）
    - 侧面照
    - 半身照（包含完整服装）
    - 全身照
    - 统一服装：科技感工作服/专业感服装
  - 未来姐姐：10-20张参考图（同上）
  
- [ ] **创建参考图目录**
  ```bash
  mkdir -p gen_video/reference_image/kepu_gege
  mkdir -p gen_video/reference_image/weilai_jiejie
  ```

- [ ] **准备LoRA训练数据**
  - 整理参考图到训练目录
  - 创建metadata.jsonl文件

#### 交付物
- ✅ 科普哥哥参考图库（20张）
- ✅ 未来姐姐参考图库（20张）
- ✅ 训练数据准备完成

---

### Day 3-4: LoRA训练

#### 任务清单
- [ ] **训练角色LoRA**
  - 科普哥哥LoRA：`gen_video/models/lora/kepu_gege/`
  - 未来姐姐LoRA：`gen_video/models/lora/weilai_jiejie/`
  - 训练参数：1000步，学习率1e-4

- [ ] **训练服装LoRA**（可选）
  - 统一工作服LoRA
  - 确保服装一致性

- [ ] **训练科普风格LoRA**
  - 科普视频风格LoRA
  - 专业、清晰、现代风格

- [ ] **测试LoRA效果**
  - 生成测试图像
  - 验证IP人物一致性
  - 验证服装一致性

#### 交付物
- ✅ 科普哥哥LoRA模型
- ✅ 未来姐姐LoRA模型
- ✅ 科普风格LoRA模型
- ✅ LoRA测试报告

---

### Day 5: 科普场景库建设

#### 任务清单
- [x] **完善场景提示词库**
  - 使用已创建的 `gen_video/prompt/kepu_scenes.yaml`
  - 补充更多场景示例（每个类别从5个增加到12个）
  - 测试场景生成效果

- [x] **创建场景测试脚本**
  - 批量生成测试场景 (`gen_video/tools/kepu_scene_tester.py`)
  - 验证场景质量
  - 生成测试报告

#### 交付物
- ✅ 完整的科普场景提示词库（每个类别12个示例）
- ✅ 场景测试脚本 (`kepu_scene_tester.py`)

---

### Day 6-7: 脚本模板和知识库

#### 任务清单
- [x] **完善脚本模板**
  - 使用已创建的 `gen_video/templates/kepu_script_template.json`
  - 创建不同主题的脚本模板（7个主题模板：universe, quantum, earth, energy, city, biology, ai）
  - 测试脚本解析和生成流程

- [x] **完善知识库**
  - 使用已创建的 `gen_video/knowledge_base/kepu_topics.yaml`
  - 补充更多科普选题（从21个增加到50+个）
  - 建立选题分类体系（7大类别）

- [x] **创建快速生成工具**
  - `gen_video/tools/kepu_quick_generate.py`
  - 输入：选题 → 输出：完整视频
  - 支持从知识库读取选题
  - 自动生成脚本JSON（支持从模板加载）
  - 智能脚本生成（根据选题描述生成内容）
  - 调用主流程生成完整视频

#### 交付物
- ✅ 脚本模板系统（7个主题模板）
- ✅ 科普知识库（50+选题，7大类别）
- ✅ 快速生成工具（支持智能脚本生成）

---

## 📅 第二周：流程优化和测试

### Day 8-9: 完整流程测试

#### 任务清单
- [x] **生成测试视频**
  - 选择3-5个不同主题
  - 使用科普哥哥和未来姐姐分别生成
  - 记录生成时间和问题
  - 创建测试工具：`gen_video/tools/kepu_pipeline_test.py`

- [ ] **优化生成流程**
  - 根据测试结果优化
  - 解决发现的问题
  - 提升生成速度

- [x] **建立质量控制标准**
  - 创建质量检查清单
  - 建立审核流程
  - 创建质量控制标准文档：`gen_video/tools/quality_checklist.md`

#### 交付物
- ✅ 测试工具 (`kepu_pipeline_test.py`)
- ✅ 测试工具使用说明 (`科普视频测试工具使用说明.md`)
- ✅ 质量控制标准 (`quality_checklist.md`)
- [ ] 5条测试视频（待运行测试）
- [ ] 流程优化报告（待测试后生成）

---

### Day 10-11: 批量生成工具

#### 任务清单
- [ ] **开发批量生成工具**
  - `gen_video/tools/kepu_batch_generator.py`
  - 支持从知识库批量读取选题
  - 自动生成视频

- [ ] **优化生成速度**
  - 并行处理优化
  - 缓存机制
  - 资源管理

#### 交付物
- ✅ 批量生成工具
- ✅ 性能优化报告

---

### Day 12-14: 案例制作和商业化准备

#### 任务清单
- [ ] **制作案例视频**
  - 选择5-10个优质选题
  - 生成完整视频
  - 收集播放数据（如果有）

- [ ] **准备商业化材料**
  - 案例展示库
  - 报价体系文档
  - 投标材料模板

#### 交付物
- ✅ 10条案例视频
- ✅ 商业化材料包

---

## 🚀 快速启动指南

### 第一步：准备IP人物参考图

1. **收集或创建参考图**
   - 可以从现有素材中选择
   - 或使用AI生成工具创建
   - 确保风格统一

2. **整理参考图**
   ```bash
   # 创建目录
   mkdir -p gen_video/reference_image/kepu_gege
   mkdir -p gen_video/reference_image/weilai_jiejie
   
   # 复制参考图到对应目录
   cp your_images/*.png gen_video/reference_image/kepu_gege/
   ```

3. **创建metadata.jsonl**
   ```bash
   cd gen_video/reference_image/kepu_gege
   # 使用工具生成metadata
   python ../../tools/create_lora_metadata.py
   ```

### 第二步：训练LoRA

```bash
# 使用现有的训练脚本
cd gen_video
bash train_lora.sh \
  --instance_data_dir reference_image/kepu_gege \
  --output_dir models/lora/kepu_gege \
  --instance_prompt "kepu gege, science presenter, professional, modern clothing"
```

### 第三步：测试生成

```bash
# 使用快速生成工具
python gen_video/tools/kepu_quick_generate.py \
  --topic "什么是黑洞？" \
  --ip_character kepu_gege \
  --output outputs/kepu_test
```

---

## 📊 成功指标

### 技术指标
- ✅ IP人物一致性：365天不换脸
- ✅ 生成速度：单条视频 < 2小时
- ✅ 视频质量：清晰、流畅、专业
- ✅ 场景匹配度：场景与内容高度匹配

### 商业指标
- ✅ 案例视频：10条以上
- ✅ 播放数据：单条视频 > 10万播放（目标）
- ✅ 客户反馈：专业、可信、有品牌感

---

## 🎯 关键里程碑

- **Week 1结束**：IP人物LoRA训练完成，能够稳定生成固定形象
- **Week 2结束**：完整流程打通，能够2小时内生成一条视频
- **Week 3开始**：开始制作案例，准备商业化

---

## 📝 注意事项

1. **IP人物稳定性是关键**：必须确保365天不换脸
2. **内容准确性**：科普内容必须准确，需要专家审核
3. **平台适配**：针对抖音/视频号/学习强国优化格式
4. **迭代优化**：根据测试结果持续优化

